{% load static %}
<!doctype html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
  <meta name='description' content='Shop Away - Your favorite online store'>
  <title>{% block title %}Shop Away{% endblock %}</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="{% static 'favicon.svg' %}">
  <link rel="apple-touch-icon" href="{% static 'favicon.svg' %}">
  
  <!-- SEO-friendly canonical, open graph placeholders -->
  <link rel='canonical' href='{{ request.build_absolute_uri }}' />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
  <link href="/static/css/theme.css" rel="stylesheet">
  <link href="/static/css/mobile-responsive.css" rel="stylesheet">
  <link href="/static/css/mobile-utilities.css" rel="stylesheet">
  <style>
    /* Critical mobile fixes */
    @media (max-width: 768px) {
      .page-hero {
        display: block !important;
        padding: 1rem 0 !important;
      }
      main {
        display: block !important;
        min-height: 50vh;
      }
      body {
        overflow-x: hidden;
      }
      .container-fluid {
        width: 100%;
        max-width: 100%;
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
      }
      /* Ensure hero carousel is visible on mobile */
      #hero {
        display: block !important;
      }
      .hero-slider {
        display: block !important;
      }
      .carousel {
        display: block !important;
      }
      .carousel-inner {
        display: block !important;
      }
      .carousel-item {
        display: block !important;
      }
      /* Ensure product sections are visible */
      section {
        display: block !important;
      }
      .row {
        display: flex !important;
        flex-wrap: wrap !important;
      }
      .col-6, .col-sm-4, .col-md-3, .col-lg-2 {
        display: block !important;
      }
      /* Force white backgrounds on mobile */
      .card {
        background-color: white !important;
        border: 1px solid #dee2e6 !important;
      }
      .product-card {
        background-color: white !important;
      }
      .card-body {
        background-color: white !important;
      }
      body {
        background-color: #f8f9fa !important;
      }
      main {
        background-color: #f8f9fa !important;
      }
      .container-fluid {
        background-color: #f8f9fa !important;
      }
      /* Add to cart button color */
      .btn-outline-dark {
        border-color: #1baaae !important;
        color: #1baaae !important;
      }
      .btn-outline-dark:hover {
        background-color: #1baaae !important;
        border-color: #1baaae !important;
        color: white !important;
      }
    }
    
    /* Payment Methods Footer Styles */
    .payment-methods-section {
      background: linear-gradient(135deg, #000 0%, #1a1a1a 50%, #000 100%);
      margin: 0 -15px;
      padding: 2rem 15px !important;
      position: relative;
      overflow: hidden;
      width: calc(100% + 30px);
      clear: both;
      z-index: 1;
    }
    
    /* Removed shimmer effect to eliminate horizontal bar */
    
    .payment-logos-container {
      padding: 1rem 0;
      position: relative;
      overflow: hidden;
    }
    
    .payment-logos-row {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      min-width: max-content;
      padding: 0 1rem;
      animation: slideInFromLeft 1s ease-out, logoScroll 30s linear infinite;
    }
    
    @keyframes slideInFromLeft {
      0% {
        transform: translateX(-100%);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes logoScroll {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-50%);
      }
    }
    
    .payment-logo {
      flex-shrink: 0;
      width: 80px;
      height: 50px;
      animation: fadeInUp 0.6s ease-out;
      animation-fill-mode: both;
    }
    
    .payment-logo:nth-child(1) { animation-delay: 0.1s; }
    .payment-logo:nth-child(2) { animation-delay: 0.2s; }
    .payment-logo:nth-child(3) { animation-delay: 0.3s; }
    .payment-logo:nth-child(4) { animation-delay: 0.4s; }
    .payment-logo:nth-child(5) { animation-delay: 0.5s; }
    .payment-logo:nth-child(6) { animation-delay: 0.6s; }
    .payment-logo:nth-child(7) { animation-delay: 0.7s; }
    .payment-logo:nth-child(8) { animation-delay: 0.8s; }
    .payment-logo:nth-child(9) { animation-delay: 0.9s; }
    .payment-logo:nth-child(10) { animation-delay: 1.0s; }
    .payment-logo:nth-child(11) { animation-delay: 1.1s; }
    .payment-logo:nth-child(12) { animation-delay: 1.2s; }
    .payment-logo:nth-child(13) { animation-delay: 1.3s; }
    .payment-logo:nth-child(14) { animation-delay: 1.4s; }
    .payment-logo:nth-child(15) { animation-delay: 1.5s; }
    .payment-logo:nth-child(16) { animation-delay: 1.6s; }
    .payment-logo:nth-child(17) { animation-delay: 1.7s; }
    .payment-logo:nth-child(18) { animation-delay: 1.8s; }
    .payment-logo:nth-child(19) { animation-delay: 1.9s; }
    .payment-logo:nth-child(20) { animation-delay: 2.0s; }
    .payment-logo:nth-child(21) { animation-delay: 2.1s; }
    
    @keyframes fadeInUp {
      0% {
        transform: translateY(30px);
        opacity: 0;
      }
      100% {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .logo-bg {
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .logo-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(0,123,255,0.1), transparent);
      transition: left 0.5s ease;
    }
    
    .payment-logo:hover .logo-bg {
      transform: translateY(-5px) scale(1.05);
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    }
    
    .payment-logo:hover .logo-bg::before {
      left: 100%;
    }
    
    .payment-logo:hover {
      animation: bounce 0.6s ease;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
      }
      40% {
        transform: translateY(-10px);
      }
      60% {
        transform: translateY(-5px);
      }
    }
    
    /* Payment Logo Styles */
    .visa-logo {
      font-weight: 700;
      font-size: 0.9rem;
      color: #1a1f71;
      letter-spacing: 0.1em;
    }
    
    .mastercard-logo {
      position: relative;
      width: 30px;
      height: 20px;
    }
    
    .mc-circle {
      position: absolute;
      width: 20px;
      height: 20px;
      border-radius: 50%;
    }
    
    .mc-red {
      background: #eb001b;
      left: 0;
    }
    
    .mc-orange {
      background: #f79e1b;
      right: 0;
    }
    
    .amex-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #006fcf;
      letter-spacing: 0.05em;
    }
    
    .bkash-logo {
      font-weight: 700;
      font-size: 0.9rem;
      color: #e2136e;
    }
    
    .nagad-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #f7941d;
    }
    
    .rocket-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #e31e24;
    }
    
    .dbbl-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #0066cc;
    }
    
    .upay-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #00a651;
    }
    
    .ab-bank-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #e31e24;
    }
    
    .city-bank-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #e31e24;
    }
    
    .ific-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #00a651;
    }
    
    .mtb-logo {
      font-weight: 700;
      font-size: 0.9rem;
      color: #e31e24;
    }
    
    .lankabangla-logo {
      font-weight: 600;
      font-size: 0.6rem;
      color: #6a1b9a;
    }
    
    .surecash-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #6a1b9a;
    }
    
    .standard-bank-logo {
      font-weight: 600;
      font-size: 0.6rem;
      color: #00a651;
    }
    
    .nrbc-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: #00a651;
    }
    
    .tap-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #e31e24;
    }
    
    .ucash-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #e31e24;
    }
    
    .trust-axiata-logo {
      font-weight: 600;
      font-size: 0.6rem;
      color: #00a651;
    }
    
    .airtel-logo {
      font-weight: 600;
      font-size: 0.8rem;
      color: #ffd700;
    }
    
    /* SSL Commerz Badge */
    .ssl-badge {
      width: 100px;
    }
    
    .ssl-badge-bg {
      background: #0066cc;
      border-radius: 6px;
    }
    
    .ssl-logo {
      font-weight: 600;
      font-size: 0.7rem;
      color: white;
      letter-spacing: 0.05em;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% {
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      }
      50% {
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3), 0 0 10px rgba(0,123,255,0.5);
      }
      100% {
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      }
    }
    
    /* Removed continuous scroll animation to eliminate horizontal bar */
    
    /* Floating animation for logos */
    .payment-logo:nth-child(odd) {
      animation: float 3s ease-in-out infinite;
    }
    
    .payment-logo:nth-child(even) {
      animation: float 3s ease-in-out infinite reverse;
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateY(0px);
      }
      50% {
        transform: translateY(-3px);
      }
    }
    
    /* Glow effect for SSL badge */
    .ssl-badge .ssl-badge-bg {
      animation: glow 2s ease-in-out infinite alternate;
    }
    
    @keyframes glow {
      from {
        box-shadow: 0 0 5px rgba(0,123,255,0.5);
      }
      to {
        box-shadow: 0 0 20px rgba(0,123,255,0.8), 0 0 30px rgba(0,123,255,0.6);
      }
    }
    
    /* Rotate animation for card logos */
    .visa-logo, .amex-logo {
      animation: rotate 4s linear infinite;
    }
    
    @keyframes rotate {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
    
    /* Scale animation for mobile banking logos */
    .bkash-logo, .nagad-logo, .rocket-logo {
      animation: scale 2s ease-in-out infinite;
    }
    
    @keyframes scale {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.1);
      }
    }
    
    /* Mobile Responsive */
    @media (max-width: 768px) {
      .payment-logos-row {
        gap: 0.3rem;
        padding: 0 0.5rem;
      }
      
      .payment-logo {
        width: 60px;
        height: 40px;
      }
      
      .visa-logo, .bkash-logo, .mtb-logo {
        font-size: 0.7rem;
      }
      
      .amex-logo, .dbbl-logo, .ab-bank-logo, .city-bank-logo, .ific-logo {
        font-size: 0.6rem;
      }
      
      .lankabangla-logo, .standard-bank-logo, .trust-axiata-logo {
        font-size: 0.5rem;
      }
      
      .ssl-badge {
        width: 80px;
      }
      
      .ssl-logo {
        font-size: 0.6rem;
      }
    }
    
    @media (max-width: 576px) {
      .payment-logos-row {
        gap: 0.2rem;
      }
      
      .payment-logo {
        width: 50px;
        height: 35px;
      }
      
      .logo-bg {
        padding: 0.3rem;
      }
      
      .visa-logo, .bkash-logo, .mtb-logo {
        font-size: 0.6rem;
      }
      
      .amex-logo, .dbbl-logo, .ab-bank-logo, .city-bank-logo, .ific-logo {
        font-size: 0.5rem;
      }
      
      .lankabangla-logo, .standard-bank-logo, .trust-axiata-logo {
        font-size: 0.4rem;
      }
      
      .ssl-badge {
        width: 70px;
      }
      
      .ssl-logo {
        font-size: 0.5rem;
      }
    }
  </style>
</head>
<body>
<!-- Auto-Hide Mobile Search Bar - Single Line with Icon -->
<div class='mobile-search-bar d-lg-none' id='mobileSearchBar'>
  <div class='container-fluid px-3'>
    <form method='get' action='/search/' id='mobileSearchForm'>
      <div class='mobile-search-container'>
        <input class='mobile-search-input' name='q' placeholder='Search products...' aria-label='Search products' value='{{ request.GET.q }}' id='mobileSearchInput'>
        <i class='fa fa-search mobile-search-icon' id='mobileSearchIcon'></i>
      </div>
    </form>
  </div>
</div>

<!-- Show Search Button (appears when search bar is hidden) -->
<div class='mobile-show-search d-lg-none' id='mobileShowSearch'>
  <button class='btn btn-mint btn-sm' id='showSearchBtn'>
    <i class='fa fa-search me-1'></i>Search
  </button>
</div>
<div class='top-strip text-white small d-none d-lg-block'>
  <div class='container d-flex justify-content-between py-1'>
    <div>
      <i class='fa fa-bolt me-1'></i> Fast delivery
      <span class='ms-3'><i class='fa fa-rotate-left me-1'></i> Easy returns</span>
      <span class='ms-3'><i class='fa fa-shield-halved me-1'></i> Secure checkout</span>
    </div>
    <div>
      <i class='fa fa-phone me-1'></i> Hotline: <strong>09638-000000</strong>
    </div>
  </div>
</div>
<nav class='navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top border-bottom'>
  <div class='container-fluid'>
    <a class='navbar-brand fw-bold' style='color: var(--mint-dark);' href='/'>
      <i class="fa-solid fa-mountain-sun me-1"></i> 
      <span class='d-none d-sm-inline'>ShopAway</span>
      <span class='d-sm-none'>SA</span>
    </a>
    
    <!-- Mobile Cart Icon -->
    <div class='d-lg-none d-flex align-items-center me-2'>
      <a class='nav-link position-relative p-2' href='{% url "cart_view" %}'>
        <i class='fa-solid fa-cart-shopping fs-5'></i>
        {% if cart_count > 0 %}
        <span class='position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger' style='font-size: 0.6rem;'>
          {{ cart_count }}
        </span>
        {% endif %}
      </a>
    </div>
    
    <button class='navbar-toggler border-0' type='button' data-bs-toggle='collapse' data-bs-target='#navMain' aria-controls='navMain' aria-expanded='false' aria-label='Toggle navigation'>
      <span class='navbar-toggler-icon'></span>
    </button>
    
    <div class='collapse navbar-collapse' id='navMain'>
      
      <!-- Desktop Search -->
      <form class='mx-lg-auto my-2 my-lg-0 flex-grow-1 nav-search d-none d-lg-block' method='get' action='/search/'>
        <div class='input-group nav-search-group'>
          <input class='form-control nav-search-input' name='q' placeholder='Search products...' aria-label='Search products' value='{{ request.GET.q }}'>
          <button class='btn nav-search-btn' style='background-color: var(--mint-dark); border-color: var(--mint-dark); color: white;' type='submit' aria-label='Search'>
            <i class='fa fa-search'></i>
          </button>
        </div>
      </form>
      
      <!-- Desktop Navigation -->
      <ul class='navbar-nav ms-lg-3 align-items-lg-center d-none d-lg-flex'>
        <li class='nav-item d-flex align-items-center me-3 text-muted small'>
          <i class='fa fa-phone me-1'></i> 01991095900
        </li>
        <li class='nav-item dropdown position-static'>
          <a class='nav-link dropdown-toggle' href='#' data-bs-toggle='dropdown'>Shop</a>
          <div class='dropdown-menu w-100 border-0 shadow-lg p-3 mega-menu'>
            <div class='row g-3'>
              <div class='col-6 col-md-3'>
                <h6 class='text-uppercase small text-muted'>Categories</h6>
                <ul class='list-unstyled mb-0 small'>
                  <li><a class='dropdown-item' href='/?category=electronics'>Electronics</a></li>
                  <li><a class='dropdown-item' href='/?category=fashion'>Fashion</a></li>
                  <li><a class='dropdown-item' href='/?category=grocery'>Grocery</a></li>
                  <li><a class='dropdown-item' href='/?category=home'>Home & Living</a></li>
                </ul>
              </div>
              <div class='col-6 col-md-3'>
                <h6 class='text-uppercase small text-muted'>Featured</h6>
                <a class='card card-hover border-0 text-decoration-none text-dark' href='/?featured=true'>
                  <div class='card-body py-2'>Top Deals</div>
                </a>
                <a class='card card-hover border-0 text-decoration-none text-dark mt-2' href='/?new=true'>
                  <div class='card-body py-2'>New Arrivals</div>
                </a>
              </div>
              <div class='col-12 col-md-6'>
                <div class='p-3 rounded-3 promo-tile'>
                  <div class='d-flex justify-content-between align-items-center'>
                    <div>
                      <div class='h5 mb-0'>Big Savings Week</div>
                      <div class='small text-muted'>Up to 50% off selected items</div>
                    </div>
                    <a class='btn btn-light btn-sm' href='/?sale=true'>Shop Now</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
      
      <!-- Mobile Navigation Links -->
      <ul class='navbar-nav d-lg-none'>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?category=electronics'>
            <i class='fa fa-laptop me-2'></i> Electronics
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?category=fashion'>
            <i class='fa fa-tshirt me-2'></i> Fashion
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?category=grocery'>
            <i class='fa fa-shopping-cart me-2'></i> Grocery
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?category=home'>
            <i class='fa fa-home me-2'></i> Home & Living
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?featured=true'>
            <i class='fa fa-star me-2'></i> Top Deals
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/?new=true'>
            <i class='fa fa-sparkles me-2'></i> New Arrivals
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link d-flex align-items-center py-2' href='/accounts/login/'>
            <i class='fa-solid fa-user me-2'></i> Login
          </a>
        </li>
      </ul>
      
      <!-- Desktop Cart and Login -->
      <ul class='navbar-nav d-none d-lg-flex'>
        <li class='nav-item'>
          <a class='nav-link position-relative' href='{% url "cart_view" %}'>
            <i class='fa-solid fa-cart-shopping'></i> 
            <span class='d-none d-xl-inline ms-1'>Cart</span>
            {% if cart_count > 0 %}
            <span class='position-absolute top-0 start-100 translate-middle badge rounded-pill' style='background-color: var(--mint); color: var(--ink);'>
              {{ cart_count }}
              <span class='visually-hidden'>items in cart</span>
            </span>
            {% endif %}
          </a>
        </li>
        <li class='nav-item'>
          <a class='nav-link' href='/accounts/login/'>
            <i class='fa-solid fa-user'></i> 
            <span class='d-none d-xl-inline ms-1'>Login</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<!-- Page Header - Visible on all devices -->
<header class='page-hero text-center py-3 py-md-4 bg-white border-bottom'>
  <div class='container'>
    {% block page_header %}{% endblock %}
    <div class='small text-muted mt-2'>{% block breadcrumbs %}{% endblock %}</div>
  </div>
</header>

<!-- Messages -->
{% if messages %}
<div class='container mt-3'>
  {% for message in messages %}
    <div class='alert alert-{{ message.tags }} alert-dismissible fade show'>{{ message }}
      <button type='button' class='btn-close' data-bs-dismiss='alert'></button>
    </div>
  {% endfor %}
</div>
{% endif %}
<main class='container-fluid px-3 px-md-4 py-3 py-md-4'>
  {% block content %}{% endblock %}
</main>
<footer class='footer-gradient text-white pt-5' style='position: relative; z-index: 1;'>
  <div class='container'>
    <div class='row g-4'>
      <div class='col-12 col-sm-6 col-md-3'>
        <h6 class='text-uppercase small'>ShopAway</h6>
        <p class='small text-white-50'>Quality products. Fast delivery. Secure checkout.</p>
      </div>
      <div class='col-12 col-sm-6 col-md-3'>
        <h6 class='text-uppercase small'>Company</h6>
        <ul class='list-unstyled small'>
          <li class='mb-1'><a class='text-white text-decoration-none' href='/about/'>About</a></li>
          <li class='mb-1'><a class='text-white text-decoration-none' href='/contact/'>Contact</a></li>
        </ul>
      </div>
      <div class='col-12 col-sm-6 col-md-3'>
        <h6 class='text-uppercase small'>Help</h6>
        <ul class='list-unstyled small'>
          <li class='mb-1'><a class='text-white text-decoration-none' href='/help/shipping/'>Shipping</a></li>
          <li class='mb-1'><a class='text-white text-decoration-none' href='/help/returns/'>Returns</a></li>
          <li class='mb-1'><a class='text-white text-decoration-none' href='/help/faq/'>FAQ</a></li>
        </ul>
      </div>
      <div class='col-12 col-sm-6 col-md-3'>
        <h6 class='text-uppercase small'>Newsletter</h6>
        <form class='d-flex flex-column flex-sm-row gap-2'>
          <input class='form-control form-control-sm' placeholder='Your email' type='email' aria-label='Email address'>
          <button class='btn btn-sm btn-light' type='submit'>Subscribe</button>
        </form>
      </div>
    </div>
    
    <div class='small text-white-50 py-3 border-top border-secondary mt-4'>&copy; {{ now|default:2025 }} ShopAway â€” All rights reserved.</div>
    
    <!-- Payment Methods Section - Inside container at bottom of footer -->
    <div class='payment-methods-section py-4 border-top border-secondary mt-4'>
      <div class='row align-items-center'>
        <div class='col-12'>
          <h6 class='text-uppercase small text-white-50 mb-3 text-center'>We Accept</h6>
          <div class='payment-logos-container'>
            <div class='payment-logos-row'>
              <!-- Card Payment Methods -->
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='visa-logo'>VISA</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <div class='mastercard-logo'>
                    <div class='mc-circle mc-red'></div>
                    <div class='mc-circle mc-orange'></div>
                  </div>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='amex-logo'>AMERICAN EXPRESS</span>
                </div>
              </div>
              
              <!-- Mobile Banking -->
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='bkash-logo'>bKash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='nagad-logo'>Nagad</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='rocket-logo'>Rocket</span>
                </div>
              </div>
              
              <!-- Banks -->
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='dbbl-logo'>DBBL Nexus</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='upay-logo'>Upay</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ab-bank-logo'>AB-Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='city-bank-logo'>City Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ific-logo'>IFIC Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='mtb-logo'>MTB</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='lankabangla-logo'>LankaBangla Finance</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='surecash-logo'>SureCash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='standard-bank-logo'>Standard Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='nrbc-logo'>NRBC Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='tap-logo'>Tap</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ucash-logo'>Ucash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='trust-axiata-logo'>Trust Axiata Pay</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='airtel-logo'>Airtel</span>
                </div>
              </div>
              
              <!-- SSL Commerz Security Badge -->
              <div class='payment-logo ssl-badge'>
                <div class='ssl-badge-bg'>
                  <span class='ssl-logo'>SSL Commerz</span>
                </div>
              </div>
              
              <!-- Duplicate logos for seamless scrolling -->
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='visa-logo'>VISA</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <div class='mastercard-logo'>
                    <div class='mc-circle mc-red'></div>
                    <div class='mc-circle mc-orange'></div>
                  </div>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='amex-logo'>AMERICAN EXPRESS</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='bkash-logo'>bKash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='nagad-logo'>Nagad</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='rocket-logo'>Rocket</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='dbbl-logo'>DBBL Nexus</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='upay-logo'>Upay</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ab-bank-logo'>AB-Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='city-bank-logo'>City Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ific-logo'>IFIC Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='mtb-logo'>MTB</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='lankabangla-logo'>LankaBangla Finance</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='surecash-logo'>SureCash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='standard-bank-logo'>Standard Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='nrbc-logo'>NRBC Bank</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='tap-logo'>Tap</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='ucash-logo'>Ucash</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='trust-axiata-logo'>Trust Axiata Pay</span>
                </div>
              </div>
              <div class='payment-logo'>
                <div class='logo-bg'>
                  <span class='airtel-logo'>Airtel</span>
                </div>
              </div>
              <div class='payment-logo ssl-badge'>
                <div class='ssl-badge-bg'>
                  <span class='ssl-logo'>SSL Commerz</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- Live Chat Widget -->
{% include "chat/chat_button.html" %}
{% include "chat/chat_window.html" %}
<script src="/static/chat/chat.js"></script>
<script src="/static/js/mobile-enhancements.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // simple intersection observer to reveal sections as they scroll into view
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if(e.isIntersecting){ e.target.classList.add('reveal-visible'); }
    })
  }, { threshold: .1 });
  document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
</script>

<!-- Enhanced Auto-Hide Mobile Search Bar Script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const searchBar = document.getElementById('mobileSearchBar');
    const searchForm = document.getElementById('mobileSearchForm');
    const searchInput = document.getElementById('mobileSearchInput');
    const searchIcon = document.getElementById('mobileSearchIcon');
    const showSearchBtn = document.getElementById('showSearchBtn');
    const mobileShowSearch = document.getElementById('mobileShowSearch');
    let lastScrollTop = 0;
    let scrollTimeout;
    let isScrolling = false;
    
    // Make search icon clickable
    if (searchIcon && searchForm) {
      searchIcon.style.pointerEvents = 'auto';
      searchIcon.style.cursor = 'pointer';
      
      searchIcon.addEventListener('click', function(e) {
        e.preventDefault();
        if (searchInput.value.trim()) {
          // Hide search bar after search
          searchBar.classList.add('hidden');
          // Show the "Show Search" button
          if (mobileShowSearch) {
            mobileShowSearch.classList.add('visible');
          }
          searchForm.submit();
        }
      });
    }
    
    // Make input submit on Enter
    if (searchInput && searchForm) {
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (searchInput.value.trim()) {
            // Hide search bar after search
            searchBar.classList.add('hidden');
            // Show the "Show Search" button
            if (mobileShowSearch) {
              mobileShowSearch.classList.add('visible');
            }
            searchForm.submit();
          }
        }
      });
    }
    
    // Add search suggestions functionality
    if (searchInput) {
      let suggestionTimeout;
      
      searchInput.addEventListener('input', function(e) {
        const query = e.target.value.trim();
        
        // Clear existing timeout
        clearTimeout(suggestionTimeout);
        
        if (query.length >= 2) {
          // Debounce the search suggestions
          suggestionTimeout = setTimeout(function() {
            fetch('/search/suggestions/?q=' + encodeURIComponent(query))
              .then(response => response.json())
              .then(data => {
                // You can implement a dropdown with suggestions here
                // For now, we'll just log them to console
                if (data.suggestions && data.suggestions.length > 0) {
                  console.log('Search suggestions:', data.suggestions);
                }
              })
              .catch(error => {
                console.log('Error fetching suggestions:', error);
              });
          }, 300);
        }
      });
    }
    
    // Show Search Button functionality
    if (showSearchBtn && searchBar && mobileShowSearch) {
      showSearchBtn.addEventListener('click', function(e) {
        e.preventDefault();
        // Show search bar
        searchBar.classList.remove('hidden');
        // Hide show search button
        mobileShowSearch.classList.remove('visible');
        // Focus on search input
        if (searchInput) {
          setTimeout(function() {
            searchInput.focus();
          }, 100);
        }
      });
    }
    
    // Auto-hide functionality
    if (searchBar) {
      let ticking = false;
      
      function updateSearchBar() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollDifference = Math.abs(scrollTop - lastScrollTop);
        
        // Hide if scrolling down with significant movement
        if (scrollTop > lastScrollTop && scrollTop > 30 && scrollDifference > 3) {
          searchBar.classList.add('hidden');
          // Show the "Show Search" button when hiding
          if (mobileShowSearch) {
            mobileShowSearch.classList.add('visible');
          }
          isScrolling = true;
        } 
        // Show when scrolling up or at top
        else if (scrollTop < lastScrollTop || scrollTop <= 30) {
          searchBar.classList.remove('hidden');
          // Hide the "Show Search" button when showing
          if (mobileShowSearch) {
            mobileShowSearch.classList.remove('visible');
          }
          isScrolling = false;
        }
        
        lastScrollTop = scrollTop;
        ticking = false;
      }
      
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateSearchBar);
          ticking = true;
        }
      }
      
      // Add scroll listener
      window.addEventListener('scroll', function() {
        requestTick();
        
        // Clear existing timeout
        clearTimeout(scrollTimeout);
        
        // Show search bar after user stops scrolling for 600ms
        scrollTimeout = setTimeout(function() {
          if (isScrolling) {
            searchBar.classList.remove('hidden');
            // Hide the "Show Search" button when showing
            if (mobileShowSearch) {
              mobileShowSearch.classList.remove('visible');
            }
            isScrolling = false;
          }
        }, 600);
      }, { passive: true });
      
      // Debug: Log when search bar should hide/show
      console.log('Mobile search bar auto-hide initialized');
    }
    
    // Show search bar when returning to homepage or search page
    if (searchBar) {
      // Check if we're on homepage or search page
      const currentPath = window.location.pathname;
      if (currentPath === '/' || currentPath === '/search/') {
        // Show search bar after a short delay to ensure smooth transition
        setTimeout(function() {
          searchBar.classList.remove('hidden');
          // Hide the "Show Search" button when showing search bar
          if (mobileShowSearch) {
            mobileShowSearch.classList.remove('visible');
          }
        }, 100);
      }
    }
  });
</script>

<!-- Payment Footer Animations Script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Intersection Observer for scroll-triggered animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const paymentObserver = new IntersectionObserver(function(entries) {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-in');
        
        // Trigger staggered animation for each logo
        const logos = entry.target.querySelectorAll('.payment-logo');
        logos.forEach((logo, index) => {
          setTimeout(() => {
            logo.style.animationPlayState = 'running';
          }, index * 100);
        });
      }
    });
  }, observerOptions);
  
  // Observe payment section
  const paymentSection = document.querySelector('.payment-methods-section');
  if (paymentSection) {
    paymentObserver.observe(paymentSection);
  }
  
  // Add click animations to logos
  const paymentLogos = document.querySelectorAll('.payment-logo');
  paymentLogos.forEach(logo => {
    logo.addEventListener('click', function(e) {
      e.preventDefault();
      
      // Create ripple effect
      const ripple = document.createElement('div');
      ripple.style.position = 'absolute';
      ripple.style.borderRadius = '50%';
      ripple.style.background = 'rgba(255,255,255,0.6)';
      ripple.style.transform = 'scale(0)';
      ripple.style.animation = 'ripple 0.6s linear';
      ripple.style.left = '50%';
      ripple.style.top = '50%';
      ripple.style.width = '20px';
      ripple.style.height = '20px';
      ripple.style.marginLeft = '-10px';
      ripple.style.marginTop = '-10px';
      
      this.style.position = 'relative';
      this.appendChild(ripple);
      
      setTimeout(() => {
        ripple.remove();
      }, 600);
    });
  });
  
  // Add CSS for ripple animation
  const style = document.createElement('style');
  style.textContent = `
    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }
    
    .payment-logo {
      animation-play-state: paused;
    }
    
    .payment-logo.animate-in {
      animation-play-state: running;
    }
    
    /* Enhanced hover effects */
    .payment-logo:hover {
      animation-play-state: paused;
    }
    
    .payment-logo:hover .logo-bg {
      animation: logoGlow 0.3s ease-in-out;
    }
    
    @keyframes logoGlow {
      0% {
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      50% {
        box-shadow: 0 8px 25px rgba(0,0,0,0.2), 0 0 20px rgba(0,123,255,0.3);
      }
      100% {
        box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      }
    }
    
    /* Removed parallax effect to prevent positioning issues */
    
    /* Logo scrolling animation */
    .payment-logos-row:hover {
      animation-play-state: paused;
    }
    
    /* Logos are duplicated in HTML for seamless scrolling */
    
    /* Clickable Product Cards Styling */
    .product-card-link {
      display: block;
      color: inherit;
      text-decoration: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .product-card-link:hover {
      color: inherit;
      text-decoration: none;
      transform: translateY(-2px);
    }
    
    .product-card-link:hover .product-card {
      box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }
    
    .product-card {
      transition: box-shadow 0.2s ease;
      cursor: pointer;
    }
    
    .product-card-link .product-card:hover {
      box-shadow: 0 8px 25px rgba(0,0,0,0.15) !important;
    }
    
    /* Ensure buttons don't inherit card hover effects */
    .product-card-link .btn {
      transition: all 0.2s ease;
    }
    
    .product-card-link:hover .btn {
      transform: none;
    }
  `;
  document.head.appendChild(style);
  
  // Removed parallax effect to prevent positioning issues
  
  // Add random sparkle effects
  function createSparkle() {
    const sparkle = document.createElement('div');
    sparkle.style.position = 'absolute';
    sparkle.style.width = '4px';
    sparkle.style.height = '4px';
    sparkle.style.background = 'white';
    sparkle.style.borderRadius = '50%';
    sparkle.style.left = Math.random() * 100 + '%';
    sparkle.style.top = Math.random() * 100 + '%';
    sparkle.style.animation = 'sparkle 2s ease-out forwards';
    sparkle.style.pointerEvents = 'none';
    
    const paymentSection = document.querySelector('.payment-methods-section');
    if (paymentSection) {
      paymentSection.appendChild(sparkle);
      
      setTimeout(() => {
        sparkle.remove();
      }, 2000);
    }
  }
  
  // Add sparkle animation CSS
  const sparkleStyle = document.createElement('style');
  sparkleStyle.textContent = `
    @keyframes sparkle {
      0% {
        opacity: 0;
        transform: scale(0);
      }
      50% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(0);
      }
    }
  `;
  document.head.appendChild(sparkleStyle);
  
  // Create sparkles periodically
  setInterval(createSparkle, 3000);
});
</script>
</body>
</html>